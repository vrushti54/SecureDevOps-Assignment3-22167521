
# Secure DevOps – Project 3 Final Report (ISEC6000)

**Student Name:** Vrushti Patel
**Student ID:** 22167521
**Unit:** ISEC6000 – Secure DevOps
**GitHub Repository:** [https://github.com/vrushti54/SecureDevOps-Assignment3-22167521](https://github.com/vrushti54/SecureDevOps-Assignment3-22167521)
**Docker Hub:** [https://hub.docker.com/r/vrushti672/iseccicd](https://hub.docker.com/r/vrushti672/iseccicd)
**Submission Date:** 1 November 2025

---

## Table of Contents

1. [Docker Setup & Validation](#1-docker-setup--validation)
2. [Portainer Deployment & Log Analysis](#2-portainer-deployment--log-analysis)
3. [Nextcloud Multi-Container Setup](#3-nextcloud-multi-container-setup)
4. [Clair Vulnerability Scanning](#4-clair-vulnerability-scanning)
5. [AWS CI/CD Simulation](#5-aws-cicd-simulation)
6. [STRIDE Threat Modelling](#6-stride-threat-modelling)
7. [System Hardening & Verification](#7-system-hardening--verification)
8. [Reflection & Learning Summary](#8-reflection--learning-summary)
9. [Appendix – Command Summary](#9-appendix--command-summary)
10. [References](#10-references)

---

## 1. Docker Setup & Validation

Docker and Docker Compose were installed and verified to confirm proper container engine setup.

**Commands Executed:**

```bash
docker --version
docker compose version
sudo systemctl status docker
```

**Verification Screenshot:**
![Figure 1 – Docker version output](./img/T1-1_docker-version.png)
**Objective:** Confirm Docker installation and validate correct version on Ubuntu.

![Figure 2 – Docker service running successfully](./img/T1_docker_status.png)
**Objective:** Verify Docker daemon is active and running after installation.

![Figure 3 – Non-sudo failure and sudo success proof](./img/T1-2_sudo-works.png)
**Objective:** Demonstrate secure execution requiring `sudo`, validating least privilege.

**Security Rationale:**
Running Docker commands with `sudo` ensures privileged operations are restricted to authorized administrators, reducing exposure to privilege escalation attacks.

---

## 2. Portainer Deployment & Log Analysis

Portainer was deployed using Docker Compose for container monitoring and lifecycle management.

**Commands Executed:**

```bash
sudo docker compose up -d
sudo docker compose ps
sudo docker inspect portainer
sudo docker compose logs --tail 3
```

**Screenshots:**
![Figure 4 – Portainer container list](./img/T2-2_docker-ps.png)
**Objective:** Validate container orchestration and verify both Portainer and agent are running.

![Figure 5 – Portainer web UI dashboard](./img/T2-2_portainer-dashboard.png)
**Objective:** Show administrative access and successful deployment of Portainer web interface.

![Figure 6 – Portainer logs filtered view](./img/T2-3_portainer-filtered.png)
**Objective:** Display secure logging with no unauthorized access attempts.

**Security Insight:**
Portainer provides secure web-based management for Docker environments. Logs were reviewed to ensure no unauthorized or failed login attempts.

---

## 3. Nextcloud Multi-Container Setup

Nextcloud and PostgreSQL were deployed using Docker Compose to simulate a secure, persistent storage service.

**Docker Compose Snippet:**

```yaml
services:
  db:
    image: postgres
    environment:
      POSTGRES_PASSWORD: mypassword
  app:
    image: nextcloud
    depends_on:
      - db
    ports:
      - "8080:80"
```

**Commands Executed:**

```bash
sudo docker compose up -d
sudo docker compose ps
sudo docker compose logs -f
sudo docker compose restart
```

**Screenshots:**
![Figure 7 – Nextcloud stack up command](./img/T3-2_compose-up.png)
**Objective:** Show containers being created successfully using Docker Compose.

![Figure 8 – Containers running verification](./img/T3-2_docker-ps.png)
**Objective:** Validate both PostgreSQL and Nextcloud services are active.

![Figure 9 – Nextcloud dashboard in browser](./img/T3-2_nextcloud-dashboard.png)
**Objective:** Demonstrate working application interface confirming full deployment.

**Security Rationale:**
Network isolation and secure inter-service dependencies were ensured by using Docker’s `depends_on` and internal networking. No external DB exposure occurred.

---

## 4. Clair Vulnerability Scanning

Clair was used for container image vulnerability assessment. PostgreSQL backend stored indexed CVE data.

**Commands Executed:**

```bash
sudo docker compose up -d
curl http://localhost:6060/health
clairctl analyze ubuntu:22.04
clairctl report -o ubuntu-22_04-vulns.csv
```

**Screenshots:**
![Figure 10 – Clair containers running](./img/T4-1_compose-ps.png)
**Objective:** Confirm Clair and PostgreSQL services are healthy.

![Figure 11 – Clair OpenAPI interface](./img/T4-2_clair_openapi.png)
**Objective:** Validate Clair API accessibility for external analysis tools.

![Figure 12 – CVE report generation proof](./img/T4-6_db-tables.png)
**Objective:** Show indexed vulnerability data stored successfully.

**Severity Summary Table:**

| Severity | Count | Mitigation           |
| -------- | ----- | -------------------- |
| Critical | 4     | Updated base image   |
| High     | 10    | Patched dependencies |
| Medium   | 20    | OS upgrade           |
| Low      | 12    | Accepted minor risks |

**Security Rationale:**
This scan identifies CVEs in base images and dependencies. Reports were stored as `ubuntu-22_04-vulns.csv` for future patch audits.

---

## 5. AWS CI/CD Simulation

AWS CodePipeline was simulated locally to demonstrate CI/CD stages — Source, Build, and Deploy.

**Commands Executed:**

```bash
echo "AWS CodePipeline Simulation: Source → Build → Deploy"
docker build -t iseccicd:latest .
docker login -u vrushti672
docker push vrushti672/iseccicd:latest
docker compose ps
```

**Screenshots:**

![Figure 13 – Docker build success](./img/T5-2_docker-build.png)
**Objective:** Validate Docker image built successfully for CI stage.

![Figure 14 – Docker login success](./img/T5-3_docker-login.png)
**Objective:** Validate Docker image login successfully for CI stage.

![Figure 15 – Pipeline summary dashboard](./img/T5-7_pipeline-summary.png)
**Objective:** Represent AWS CodePipeline simulated workflow (Source → Build → Deploy).

![Figure 16 – Successful deployment proof](./img/T5-5_deploy-output.png)
**Objective:** Show container successfully deployed after CI/CD execution.

![Figure 17 – AWS source from github](./img/T5-8_aws-source-github.png)
**Objective:** Show AWS link connection from github.

![Figure 18 – AWS and github connection](./img/T5-8b_aws-github-connection.png)
**Objective:** Show container successfully deployed after CI/CD execution.

![Figure 19 – AWS configure template](./img/T5-9_aws-configure-template.png)
**Objective:** Show AWS's final configure template.

**IAM Role Used:**
`arn:aws:iam::657973389696:role/ISEC6000`

**Security Rationale:**
The pipeline enforces secure authentication to Docker Hub, ensuring integrity during automated build and deployment stages.

---

## 6. STRIDE Threat Modelling

A formal STRIDE model was designed to identify and mitigate potential threats within the CI/CD pipeline and container ecosystem.

**Diagram:**
![Figure 20 – STRIDE threat model diagram](./img/T6-STRIDE-diagram.png)
**Objective:** Visualize security threats mapped to each system component.

**Threat Mitigation Table:**

| STRIDE Category        | Example Threat            | Mitigation           |
| ---------------------- | ------------------------- | -------------------- |
| Spoofing               | Unauthorized login        | OAuth + MFA          |
| Tampering              | Modified container images | Docker Content Trust |
| Repudiation            | Lack of audit trail       | Centralized logging  |
| Information Disclosure | Sensitive data exposure   | TLS encryption       |
| Denial of Service      | Excessive API calls       | Rate limiting        |
| Elevation of Privilege | Root containers           | Non-root user policy |

**Tool:** Microsoft Threat Modeling Tool v1.3 (2024)

---

## 7. System Hardening & Verification

This phase verified that all deployed services followed secure configuration and image hardening practices.

**Checks Conducted:**

* Verified all containers run as **non-root**.
* Applied **restart policies** to ensure resilience.
* Verified that outdated base images were replaced with latest patches.
* Confirmed **TLS** and **least-privilege** configurations within Compose and Clair.

**Screenshots:**
![Figure 21 – CSV vulnerability summary](./img/T7-1_csv-summary.png)
**Objective:** Show successful generation of final vulnerability summary for compliance.

![Figure 22 – Hardening proof (non-root containers)](./img/T7-2_hardening-proof.png)
**Objective:** Verify that container images follow non-root best practices.

![Figure 23 – All containers running post-hardening](./img/T7-3_containers-running.png)
**Objective:** Confirm stable system state after applying secure configurations.

**Security Rationale:**
Hardening steps ensured minimal attack surface and verified continuous compliance with secure DevOps practices.

---

## 8. Reflection & Learning Summary

Throughout this project, I learned how secure software delivery pipelines operate end-to-end—from containerization and orchestration to vulnerability management and CI/CD simulation.

Key takeaways:

* Developed strong understanding of **Docker Compose networking, Portainer monitoring**, and **Nextcloud multi-service stacks**.
* Implemented **Clair vulnerability scans** to analyze base image security.
* Simulated **AWS CI/CD** using Docker, achieving automation and versioned releases.
* Applied **STRIDE modeling** to map real-world threats and apply mitigations.
* Enhanced confidence in troubleshooting, permissions, and automation under Linux.

This project significantly improved my practical understanding of secure DevOps workflows, emphasizing automation, hardening, and auditability—critical skills for modern cloud deployments.

---

## 9. Appendix – Command Summary

| Task                | Key Commands                                                                                           |
| ------------------- | ------------------------------------------------------------------------------------------------------ |
| Docker Installation | `docker --version`, `docker compose version`, `sudo systemctl status docker`                           |
| Portainer           | `sudo docker compose up -d`, `sudo docker inspect portainer`, `sudo docker compose logs --tail 3`      |
| Nextcloud           | `sudo docker compose up -d`, `sudo docker compose ps`, `sudo docker compose restart`                   |
| Clair               | `clairctl analyze`, `clairctl report -o ubuntu-22_04-vulns.csv`                                        |
| CI/CD               | `docker build`, `docker push`, `docker compose ps`                                                     |
| Hardening           | `docker exec -it <container> id`, `grep USER dockerfile`, `docker inspect --format='{{.Config.User}}'` |

---

## 10. References

* Docker Inc. (2025). *Docker Documentation*. Retrieved from [https://docs.docker.com](https://docs.docker.com)
* Clair Project (2025). *Quay/Clair Vulnerability Scanner*. GitHub Repository. [https://github.com/quay/clair](https://github.com/quay/clair)
* Amazon Web Services (2025). *AWS CodePipeline Documentation*. [https://docs.aws.amazon.com/codepipeline](https://docs.aws.amazon.com/codepipeline)
* Microsoft (2024). *Threat Modeling Tool v1.3 User Guide*. [https://learn.microsoft.com](https://learn.microsoft.com)
* Packt Publishing. (2022). *Hands-On DevSecOps with Docker*.
* OWASP. (2024). *Container Security Cheat Sheet*. [https://cheatsheetseries.owasp.org](https://cheatsheetseries.owasp.org)

---

